

{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Django Tailwind</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    {% tailwind_css %}
    <!-- Modal Styling -->
    <style>
      .modal {
          display: none;
      }
      .modal.active {
          display: flex;
      }
      @keyframes spin-slow {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      .animate-spin-slow {
        animation: spin-slow 3s linear infinite;
      }
    </style>
  </head>

  <body class="bg-gray-50 font-serif leading-normal tracking-normal">
    <!-- Main Content -->
    <div class="w-full mx-auto pb-16 md:pb-0">
      {% block content %}
      <section class="flex items-center justify-center h-screen">
        <h1 class="text-5xl">Django + Tailwind = ❤️</h1>
      </section>
      {% endblock %}
    </div>


    <!-- Normal Navbar for Desktop and Tablets -->
    <div class="hidden md:flex fixed top-0 inset-x-0 bg-white shadow-md border-b border-gray-200 z-10">
      <div class="container mx-auto px-4 py-2 flex justify-between items-center">
        <!-- Logo -->
        <div class="text-lg font-bold text-gray-800">My App</div>

        <!-- Normal Navbar Links -->
        <nav class="space-x-6">
          <a href="{% url 'home' %}" class="text-gray-800 hover:text-blue-500 {% if request.path == '/' %}text-green-500{% endif %}">
            Home
          </a>
          <a href="" class="text-gray-800 hover:text-blue-500 {% if request.path == '/profile/' %}text-green-500{% endif %}">
            Profile
          </a>
          <a href="#" class="text-gray-800 hover:text-blue-500">Search</a>
          <!-- Add more links as needed -->
        </nav>
      </div>
    </div>


    <!-- Bottom Navbar -->
    <div class="fixed bottom-0 inset-x-0 bg-white shadow-md border-t border-gray-200 z-20 md:hidden">
      <div class="flex justify-center gap-12 items-center px-4 py-2">
        <a id="home-link" href="{% url 'home' %}" 
          class="flex flex-col items-center text-gray-800 hover:text-blue-500">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 9.75L12 3l9 6.75V20a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 20z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 21V12h6v9"></path>
          </svg>
          <span class="text-sm">Home</span>
        </a>


        <a href="" class="flex flex-col items-center text-gray-800 hover:text-blue-500">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 20c0-2.21 2.69-4 6-4s6 1.79 6 4"></path>
          </svg>
          <span class="text-sm">Profile</span>
        </a>
      
        <a href="#" class="flex flex-col items-center text-gray-800 hover:text-blue-500">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11 19a8 8 0 100-16 8 8 0 000 16zm10 4l-4.35-4.35"></path>
          </svg>
          <span class="text-sm">Search</span>
        </a>
        <!-- Add more buttons here -->
      </div>
    </div>

    <!-- Loading Overlay -->
<div id="loading-overlay" class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center transition-opacity duration-500">
  <img src="{% static 'images/logo.png' %}" alt="กำลังโหลด..." class="w-24 h-24 animate-spin-slow mb-4">
  <p class="text-gray-700 font-semibold text-lg">กำลังโหลดข้อมูล...</p>
</div>

<!-- Hide overlay when page is fully loaded -->
<script>
  window.addEventListener('load', function () {
    const overlay = document.getElementById('loading-overlay');
    if (overlay) {
      overlay.classList.add('opacity-0');
      setTimeout(() => overlay.style.display = 'none', 500); // fade out
    }
  });
</script>



<script>
  function showLogoutModal(event) {
    event.preventDefault(); // ป้องกันการ Redirect
    const modal = document.getElementById('logoutModal');
    if (modal) {
        modal.classList.add('active'); // แสดง Modal
    }
}

  // ปุ่ม "ยกเลิก" สำหรับซ่อน Modal
  const cancelButton = document.getElementById('cancelLogout');
  if (cancelButton) {
      cancelButton.addEventListener('click', function () {
          const modal = document.getElementById('logoutModal');
          if (modal) {
              modal.classList.remove('active'); // ซ่อน Modal
          }
      });
  }

  // ปุ่ม "ยืนยัน" สำหรับออกจากระบบ
  const confirmButton = document.getElementById('confirmLogout');
  if (confirmButton) {
      confirmButton.addEventListener('click', function () {
      window.location.href = "{% url 'logout' %}";
      });
  }

</script>
<script>
  // Show the "scroll to top" button when scrolling
  window.addEventListener('scroll', () => {
    const scrollButton = document.getElementById('scroll-to-top');
    if (window.scrollY > 200) { // Show button when scrolled 200px down
      scrollButton.classList.remove('hidden');
    } else {
      scrollButton.classList.add('hidden');
    }
  });

  // Scroll to the top when the button is clicked
  document.getElementById('scroll-to-top').addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
</script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
    const currentUrl = window.location.pathname;
    
    // List of links and their corresponding ids for Desktop and Mobile
    const links = [
      { 
        ids: ["home-link", "home-link-mobile"], 
        url: "{% url 'home' %}" 
      },
      { 
        ids: ["profile-link", "profile-link-mobile"], 
        url: "{% if student.id %}{% url 'profile' student.id %}{% else %}#{% endif %}" 
      },
      { 
        ids: ["grade-link", "grade-link-mobile"], 
        url: "{% if student.id %}{% url 'student_results' student.id %}{% else %}#{% endif %}" 
      },
      { 
        ids: ["grading-link", "grading-link-mobile"], 
        url: "{% url 'ingr_student' %}" 
      },
      { 
        ids: ["grade-link", "grade-link-mobile"], 
        url: "{% url 'gr_student' %}" 
      }

    ];

    // Loop through each link and check if its href matches the current URL
    links.forEach(link => {
      link.ids.forEach(id => {
        const element = document.getElementById(id);
        if (element && currentUrl === link.url) {
          element.classList.remove("text-gray-800","text-white", "hover:text-green-500");
          element.classList.add("text-green-500"); // Highlighted color
        }
      });
    });
  });

  </script>

  <script>
document.getElementById('menu-btn').addEventListener('click', () => {
  const menuBtn = document.getElementById('menu-btn');
  const menu = document.getElementById('menu-items');

  // Toggle hidden class สำหรับการแสดงเมนู
  menu.classList.toggle('hidden');

  // Toggle open class สำหรับการแสดง animation
  menuBtn.classList.toggle('open');
});

  </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const currentUrl = window.location.pathname;
        const homeUrl = "{% url 'home' %}";
        const homeLink = document.getElementById("home-link");
    
        console.log("Current URL:", currentUrl); // Debugging
        console.log("Home URL:", homeUrl);       // Debugging
    
        if (currentUrl === homeUrl) {
          homeLink.classList.remove("text-gray-800", "hover:text-blue-500");
          homeLink.classList.add("text-green-500");
        }
      });
    </script>
  </body>
</html>
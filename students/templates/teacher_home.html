{% extends 'base.html' %}
<!DOCTYPE html>
<html lang="en">
{% block title %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js" defer></script>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/font.css' %}">
        <link rel="icon" href="{% static 'images/logo.ico' %}" type="image/x-icon">

    <title>หน้าแรก</title>
</head>
{% endblock %}

{% block content %}
<body>
    <div class="min-h-screen bg-green-800 px-4 sm:px-6 font-prompt"> 
        <!-- Header Section -->
        <header class="pt-10 md:pt-20  2xl:pt-28 2xl:pb-14 flex flex-col lg:flex-row justify-between items-center lg:max-w-5xl mx-auto space-y-3 md:space-y-0 z-30">
            <div class="flex flex-col sm:flex-row items-center text-white text-center md:text-left">
                <a href="https://kurusampanst80.com/">
                    <img class="w-24 h-24 md:w-36 md:h-36 2xl:w-40 2xl:h-40 -mt-6 md:mt-0" src="{% static 'images/logo.png' %}" alt="">
                </a>                
                <div class="mt-4 sm:mt-0 md:ml-4">
                    <h1 class="text-2xl md:text-4xl">ระบบการจัดการหน่วยสอบ</h1>
                    <span class="text-[1.2rem] md:text-[1.78rem] block -mt-0 md:mt-2">สมาคมคุรุสัมพันธ์ หน่วยสอบ 80</span>
                </div>
            </div>

            <div class="flex flex-row gap-4 pb-5 md:pb-12 lg:pb-0">
                <a href="{% url 'in_profile'  %}" class="md:mt-12 lg:mt-0 md:text-xl inline-flex items-center justify-center px-6 py-3 bg-white text-green-900 hover:bg-gray-200 hover:text-green-700 rounded-xl drop-shadow-sm shadow-md transition-all duration-300 hover:scale-105">
                    <span class="mr-2">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-pen">
                        <path d="M11.5 15H7a4 4 0 0 0-4 4v2"></path>
                        <path d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"></path>
                        <circle cx="10" cy="7" r="4"></circle>
                      </svg>
                    </span>
                    ลงทะเบียน
                </a>
                {% if user.is_superuser %}
                <a href="{% url 'admin:index' %}" class="md:mt-12 lg:mt-0 md:text-xl inline-flex items-center justify-center px-6 py-3 bg-[#06D001] text-white rounded-xl drop-shadow-sm shadow-md transition-all duration-300 hover:bg-[#04a801] hover:scale-105">
                    <span class="mr-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notepad-text">
                        <path d="M8 2v4"></path>
                        <path d="M12 2v4"></path>
                        <path d="M16 2v4"></path>
                        <rect width="16" height="18" x="4" y="4" rx="2"></rect>
                        <path d="M8 10h6"></path>
                        <path d="M8 14h8"></path>
                        <path d="M8 18h5"></path>
                    </svg>
                    </span>
                    หน้าแอดมิน
                </a>
                {% else %}
                <a href="{% url 'ingr_student' %}" class="md:mt-12 lg:mt-0 md:text-xl inline-flex items-center justify-center px-6 py-3 bg-[#06D001] text-white rounded-xl drop-shadow-sm shadow-md transition-all duration-300 hover:bg-[#04a801] hover:scale-105">
                    <span class="mr-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notepad-text">
                        <path d="M8 2v4"></path>
                        <path d="M12 2v4"></path>
                        <path d="M16 2v4"></path>
                        <rect width="16" height="18" x="4" y="4" rx="2"></rect>
                        <path d="M8 10h6"></path>
                        <path d="M8 14h8"></path>
                        <path d="M8 18h5"></path>
                    </svg>
                    </span>
                    ลงคะแนน
                </a>
                {% endif %}

            </div>
        </header>

         <!-- Stats Grid -->
         <div class="lg:max-w-3xl mx-auto pb-8 lg:mt-12 z-30">
            <!-- First Row Stats -->
            <div class="grid grid-cols-3 gap-4 sm:gap-5 lg:mb-8 mb-5">
                <a href="{% url 'sp_student_report' %}?&page=1" class="block group">
                    <div class="bg-white h-24 md:h-48 pt-4 md:pt-12 p-6 text-center rounded-xl drop-shadow-lg shadow-lg transition-all duration-300 group-hover:bg-slate-100 group-hover:scale-105 group-hover:shadow-xl">
                        <h1 class="text-[20px] md:text-5xl  group-hover:text-green-700 counter" data-target="{{total_students}}">0</h1>
                        <h2 class="text-[20px] md:text-3xl   text-green-900 mt-2 group-hover:text-green-700">นักเรียน</h2>
                    </div>
                </a>
                <a href="{% url 'sp_student_report' %}?gender=ชาย&page=1" class="block group">
                    <div class="bg-white h-24 md:h-48 pt-4 md:pt-12 p-6 text-center rounded-xl drop-shadow-lg shadow-lg transition-all duration-300 group-hover:bg-slate-100 group-hover:scale-105 group-hover:shadow-xl">
                        <h1 class="text-[20px] md:text-5xl d group-hover:text-green-700 counter" data-target="{{male_students}}">0</h1>
                        <h2 class="text-[20px] flex justify-center md:text-3xl   text-green-900 mt-2 group-hover:text-green-700"><img class="w-8 h-8 md:w-12 md:h-12 md:-mt-1" src="{% static 'images/male.png' %}">ชาย</h2>
                    </div>
                </a>
                
                <a href="{% url 'sp_student_report' %}?gender=หญิง&page=1" class="block group">
                    <div class="bg-white h-24 md:h-48 pt-4 md:pt-12 p-6 text-center rounded-xl drop-shadow-lg shadow-lg transition-all duration-300 group-hover:bg-slate-100 group-hover:scale-105 group-hover:shadow-xl">
                        <h1 class="text-[20px] md:text-5xl d group-hover:text-green-700 counter" data-target="{{female_students}}">0</h1>
                        <h2 class="text-[20px] flex justify-center md:text-3xl   text-green-900 mt-2 group-hover:text-green-700"><img class="w-8 h-8 md:w-12 md:h-12 md:-mt-1" src="{% static 'images/female.png' %}">หญิง</h2>
                    </div>
                </a>
            </div>
            <!-- Second Row Stats -->
            <div class="bg-white rounded-xl drop-shadow-lg shadow-lg transition-all duration-300 hover:bg-slate-100  py-3 md:p-6 relative z-10">
                <div class="grid grid-cols-2  md:grid-cols-4 gap-8">
                    <a href="{% url 'sp_student_report' %}?special_status=เด็กกำพร้า&page=1" class="group">
                        <div class="text-center transition-all duration-300 group-hover:scale-105">
                            <h1 class="text-[18px] md:text-5xl  group-hover:text-green-700 counter" data-target="{{orphans}}">0</h1>
                            <h1 class="text-[18px] md:text-2xl text-green-900 mt-2 group-hover:text-green-700">เด็กกำพร้า</h1>
                        </div>
                    </a>
                    <a href="{% url 'sp_student_report' %}?special_status=เด็กยากไร้&page=1" class="group">
                        <div class="text-center transition-all duration-300 group-hover:scale-105">
                            <h1 class="text-[18px] md:text-5xl  group-hover:text-green-700 counter" data-target="{{underprivileged}}">0</h1>
                            <h1 class="text-[18px] md:text-2xl text-green-900 mt-2 group-hover:text-green-700">เด็กยากไร้</h1>
                        </div>
                    </a>
                    <a href="{% url 'sp_student_report' %}?special_status=เด็กพิการ&page=1" class="group">
                        <div class="text-center transition-all duration-300 group-hover:scale-105">
                            <h1 class="text-[18px] md:text-5xl  group-hover:text-green-700 counter" data-target="{{disabled}}">0</h1>
                            <h1 class="text-[18px] md:text-2xl text-green-900 mt-2 group-hover:text-green-700">เด็กพิการ</h1>
                        </div>
                    </a>
                    <a href="{% url 'sp_student_report' %}?special_status=เด็กมุอัลลัฟ&page=1" class="group">
                        <div class="text-center transition-all duration-300 group-hover:scale-105">
                            <h1 class="text-[18px] md:text-5xl group-hover:text-green-700 counter" data-target="{{new_muslims}}">0</h1>
                            <h1 class="text-[18px] md:text-2xl text-green-900 mt-2 group-hover:text-green-700">เด็กมุอัลลัฟ</h1>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <!-- <div class="fixed top-[30rem] left-0 opacity-50
                w-[200px] 
                sm:w-[250px] 
                md:w-[450px]
                lg:w-[350px] 
                xl:w-[400px] 
                2xl:w-[450px]">
        <img class="w-full h-auto object-contain" 
            src="{% static 'images/bg-left.png' %}" 
            alt="Background Left">
    </div>

    <div class="fixed top-[30rem] right-0 opacity-50
                w-[200px] 
                sm:w-[250px] 
                md:w-[450px] 
                lg:w-[350px] 
                xl:w-[400px] 
                2xl:w-[450px]">
        <img class="w-full h-auto object-contain" 
            src="{% static 'images/bg-right.png' %}" 
            alt="Background Right">
    </div> -->

        <!-- <div class="text-center pb-8 sm:mt-40 lg:mt-28 text-lg sm:text-base md:text-3xl text-green-300 underline">
            <a href="">สมาคมคุรุสัมพันธ์อิสลามแห่งประเทศไทยในพระบรมราชูปถัมภ์</a>
        </div> -->
        
    </div>

    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const animateValue = (element, start, end, duration) => {
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const currentValue = Math.floor(progress * (end - start) + start);
                    element.textContent = currentValue;
                    
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    } else {
                        element.textContent = end;
                    }
                };
                window.requestAnimationFrame(step);
            };
    
            // สร้าง Intersection Observer สำหรับ lazy loading animation
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !entry.target.dataset.animated) {
                        const target = parseInt(entry.target.dataset.target);
                        animateValue(entry.target, 0, target, 2500); // 2000ms = 2 seconds
                        entry.target.dataset.animated = true;
                    }
                });
            }, {
                threshold: 0.1
            });
    
            // เริ่มสังเกตทุก counter elements
            document.querySelectorAll('.counter').forEach(counter => {
                observer.observe(counter);
            });
        });
        </script>
</body>
{% endblock %}
</html>
